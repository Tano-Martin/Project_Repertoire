{% extends 'base/base.html' %}
{% load static %}

{% block content %}
    <h3 style="text-align: center; padding: 10px;">Modifier le contact</h3>
    <div  style="border: 1px solid #3f3f3f78; height: 150px; width: 150px; border-radius:100%; display: flex; align-items: center; justify-content: center; margin-bottom: 10px; margin:auto;">
        <img id="output" src="{{ contact.photo.url }}" alt="photo" style="width: 100%; height: 100%; border-radius: 100%;">
    </div>
    <form action="#" method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="block">
            <div class="inputs" >
                <label for="photo">Photo</label>
                <div style=" font-size: 0.8em;">
                    <input type="file" name="photo" id="photo" onchange="loadFile(event)">
                </div>
                <label for="nom">Nom</label>
                <input type="text" name="nom" id="nom" value="{{ contact.nom }}">

                <label for="prenom">Prénom</label>
                <input type="text" name="prenom" id="prenom" {% if not contact.prenom is None %} value="{{ contact.prenom }}" {% endif %}>

                <label for="email">Adresse électronique</label>
                <input type="email" name="email" {% if not contact.email is None %} value="{{ contact.email }}" {% endif %}>
                
                <label for="telephone">Numéro de téléphone</label>
                <input type="tel" name="telephone" value="{{ contact.telephone }}">
            </div>
            <div align="center" style="display: flex;">
                <a href="{% url 'contact-detail' contact.id %}"><button type="button" style="margin: 0 5px; background-color: #c0bcbc;">Annuler</button></a>
                <button type="submit" style="margin: 0 5px;">Sauvegarder</button>
            </div>
        </div>
    </form>

    <script>
        var loadFile = function(event) {
          var output = document.getElementById('output');
          output.src = URL.createObjectURL(event.target.files[0]);
          output.onload = function() {
            URL.revokeObjectURL(output.src) // free memory
          }
        };
    </script>
{% endblock content %}